<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TreeView 增强功能测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .test-section {
            margin-bottom: 30px;
        }
        
        .test-title {
            font-size: 18px;
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tree-container {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            background-color: #fafafa;
        }
        
        .status {
            margin-top: 10px;
            padding: 10px;
            background-color: #e8f5e8;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .controls {
            margin: 10px 0;
        }
        
        button {
            margin-right: 10px;
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TreeView 增强功能测试</h1>
        
        <div class="test-section">
            <div class="test-title">测试1: 支持自定义图标 (icon 属性)</div>
            <div class="tree-container">
                <tree-view id="iconTree"></tree-view>
            </div>
            <div class="controls">
                <button onclick="expandAllIcon()">展开所有</button>
                <button onclick="collapseAllIcon()">收起所有</button>
            </div>
            <div id="iconStatus" class="status">等待初始化...</div>
        </div>
        
        <div class="test-section">
            <div class="test-title">测试2: 支持默认展开状态 (open 属性)</div>
            <div class="tree-container">
                <tree-view id="openTree"></tree-view>
            </div>
            <div class="controls">
                <button onclick="expandAllOpen()">展开所有</button>
                <button onclick="collapseAllOpen()">收起所有</button>
            </div>
            <div id="openStatus" class="status">等待初始化...</div>
        </div>
        
        <div class="test-section">
            <div class="test-title">测试3: 使用 menudata.js 数据结构</div>
            <div class="tree-container">
                <tree-view id="menuTree"></tree-view>
            </div>
            <div class="controls">
                <button onclick="expandAllMenu()">展开所有</button>
                <button onclick="collapseAllMenu()">收起所有</button>
            </div>
            <div id="menuStatus" class="status">等待初始化...</div>
        </div>
    </div>

    <script type="module">
        import './tagCustom/treeView/treeView.js';
        import { menuData } from './menudata.js';
        
        // 等待自定义元素注册完成
        await customElements.whenDefined('tree-view');
        
        // 测试数据1: 自定义图标
        const iconTestData = [
            {
                name: 'root',
                text: '根目录',
                icon: '🏠',
                children: [
                    {
                        name: 'documents',
                        text: '文档',
                        icon: '📚',
                        children: [
                            { name: 'readme', text: 'README.md', icon: '📝', url: 'readme.md' },
                            { name: 'guide', text: '用户指南', icon: '📖', url: 'guide.md' }
                        ]
                    },
                    {
                        name: 'images',
                        text: '图片',
                        icon: '🖼️',
                        children: [
                            { name: 'logo', text: 'logo.png', icon: '🎨', url: 'logo.png' },
                            { name: 'banner', text: 'banner.jpg', icon: '🌅', url: 'banner.jpg' }
                        ]
                    },
                    { name: 'config', text: '配置文件', icon: '⚙️', url: 'config.json' }
                ]
            }
        ];
        
        // 测试数据2: 默认展开状态
        const openTestData = [
            {
                name: 'project',
                text: '项目根目录',
                icon: '📁',
                open: true,  // 默认展开
                children: [
                    {
                        name: 'src',
                        text: '源代码',
                        icon: '💻',
                        open: true,  // 默认展开
                        children: [
                            { name: 'main', text: 'main.js', icon: '📄', url: 'src/main.js' },
                            { name: 'utils', text: 'utils.js', icon: '🔧', url: 'src/utils.js' }
                        ]
                    },
                    {
                        name: 'dist',
                        text: '构建输出',
                        icon: '📦',
                        open: false,  // 默认收起
                        children: [
                            { name: 'bundle', text: 'bundle.js', icon: '📄', url: 'dist/bundle.js' }
                        ]
                    }
                ]
            }
        ];
        
        // 初始化树控件
        const iconTree = document.getElementById('iconTree');
        const openTree = document.getElementById('openTree');
        const menuTree = document.getElementById('menuTree');
        
        // 设置数据
        iconTree.setData(iconTestData);
        openTree.setData(openTestData);
        menuTree.setData(menuData.slice(0, 3)); // 只显示前3个分类
        
        // 设置事件回调
        iconTree.setOnNodeClick((data) => {
            document.getElementById('iconStatus').textContent = `点击了: ${data.name} (${data.path || '文件夹'})`;
        });
        
        openTree.setOnNodeClick((data) => {
            document.getElementById('openStatus').textContent = `点击了: ${data.name} (${data.path || '文件夹'})`;
        });
        
        menuTree.setOnNodeClick((data) => {
            document.getElementById('menuStatus').textContent = `点击了: ${data.name} (${data.path || '文件夹'})`;
        });
        
        // 全局函数
        window.expandAllIcon = () => iconTree.expandAll();
        window.collapseAllIcon = () => iconTree.collapseAll();
        window.expandAllOpen = () => openTree.expandAll();
        window.collapseAllOpen = () => openTree.collapseAll();
        window.expandAllMenu = () => menuTree.expandAll();
        window.collapseAllMenu = () => menuTree.collapseAll();
        
        // 初始化状态
        document.getElementById('iconStatus').textContent = '图标测试树已初始化';
        document.getElementById('openStatus').textContent = '展开状态测试树已初始化 (注意默认展开的节点)';
        document.getElementById('menuStatus').textContent = 'MenuData测试树已初始化';
    </script>
</body>
</html>