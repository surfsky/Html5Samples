<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TreeView å¢å¼ºåŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .test-section {
            margin-bottom: 30px;
        }
        
        .test-title {
            font-size: 18px;
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tree-container {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            background-color: #fafafa;
        }
        
        .status {
            margin-top: 10px;
            padding: 10px;
            background-color: #e8f5e8;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .controls {
            margin: 10px 0;
        }
        
        button {
            margin-right: 10px;
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TreeView å¢å¼ºåŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <div class="test-title">æµ‹è¯•1: æ”¯æŒè‡ªå®šä¹‰å›¾æ ‡ (icon å±æ€§)</div>
            <div class="tree-container">
                <tree-view id="iconTree"></tree-view>
            </div>
            <div class="controls">
                <button onclick="expandAllIcon()">å±•å¼€æ‰€æœ‰</button>
                <button onclick="collapseAllIcon()">æ”¶èµ·æ‰€æœ‰</button>
            </div>
            <div id="iconStatus" class="status">ç­‰å¾…åˆå§‹åŒ–...</div>
        </div>
        
        <div class="test-section">
            <div class="test-title">æµ‹è¯•2: æ”¯æŒé»˜è®¤å±•å¼€çŠ¶æ€ (open å±æ€§)</div>
            <div class="tree-container">
                <tree-view id="openTree"></tree-view>
            </div>
            <div class="controls">
                <button onclick="expandAllOpen()">å±•å¼€æ‰€æœ‰</button>
                <button onclick="collapseAllOpen()">æ”¶èµ·æ‰€æœ‰</button>
            </div>
            <div id="openStatus" class="status">ç­‰å¾…åˆå§‹åŒ–...</div>
        </div>
        
        <div class="test-section">
            <div class="test-title">æµ‹è¯•3: ä½¿ç”¨ menudata.js æ•°æ®ç»“æ„</div>
            <div class="tree-container">
                <tree-view id="menuTree"></tree-view>
            </div>
            <div class="controls">
                <button onclick="expandAllMenu()">å±•å¼€æ‰€æœ‰</button>
                <button onclick="collapseAllMenu()">æ”¶èµ·æ‰€æœ‰</button>
            </div>
            <div id="menuStatus" class="status">ç­‰å¾…åˆå§‹åŒ–...</div>
        </div>
    </div>

    <script type="module">
        import './tagCustom/treeView/treeView.js';
        import { menuData } from './menudata.js';
        
        // ç­‰å¾…è‡ªå®šä¹‰å…ƒç´ æ³¨å†Œå®Œæˆ
        await customElements.whenDefined('tree-view');
        
        // æµ‹è¯•æ•°æ®1: è‡ªå®šä¹‰å›¾æ ‡
        const iconTestData = [
            {
                name: 'root',
                text: 'æ ¹ç›®å½•',
                icon: 'ğŸ ',
                children: [
                    {
                        name: 'documents',
                        text: 'æ–‡æ¡£',
                        icon: 'ğŸ“š',
                        children: [
                            { name: 'readme', text: 'README.md', icon: 'ğŸ“', url: 'readme.md' },
                            { name: 'guide', text: 'ç”¨æˆ·æŒ‡å—', icon: 'ğŸ“–', url: 'guide.md' }
                        ]
                    },
                    {
                        name: 'images',
                        text: 'å›¾ç‰‡',
                        icon: 'ğŸ–¼ï¸',
                        children: [
                            { name: 'logo', text: 'logo.png', icon: 'ğŸ¨', url: 'logo.png' },
                            { name: 'banner', text: 'banner.jpg', icon: 'ğŸŒ…', url: 'banner.jpg' }
                        ]
                    },
                    { name: 'config', text: 'é…ç½®æ–‡ä»¶', icon: 'âš™ï¸', url: 'config.json' }
                ]
            }
        ];
        
        // æµ‹è¯•æ•°æ®2: é»˜è®¤å±•å¼€çŠ¶æ€
        const openTestData = [
            {
                name: 'project',
                text: 'é¡¹ç›®æ ¹ç›®å½•',
                icon: 'ğŸ“',
                open: true,  // é»˜è®¤å±•å¼€
                children: [
                    {
                        name: 'src',
                        text: 'æºä»£ç ',
                        icon: 'ğŸ’»',
                        open: true,  // é»˜è®¤å±•å¼€
                        children: [
                            { name: 'main', text: 'main.js', icon: 'ğŸ“„', url: 'src/main.js' },
                            { name: 'utils', text: 'utils.js', icon: 'ğŸ”§', url: 'src/utils.js' }
                        ]
                    },
                    {
                        name: 'dist',
                        text: 'æ„å»ºè¾“å‡º',
                        icon: 'ğŸ“¦',
                        open: false,  // é»˜è®¤æ”¶èµ·
                        children: [
                            { name: 'bundle', text: 'bundle.js', icon: 'ğŸ“„', url: 'dist/bundle.js' }
                        ]
                    }
                ]
            }
        ];
        
        // åˆå§‹åŒ–æ ‘æ§ä»¶
        const iconTree = document.getElementById('iconTree');
        const openTree = document.getElementById('openTree');
        const menuTree = document.getElementById('menuTree');
        
        // è®¾ç½®æ•°æ®
        iconTree.setData(iconTestData);
        openTree.setData(openTestData);
        menuTree.setData(menuData.slice(0, 3)); // åªæ˜¾ç¤ºå‰3ä¸ªåˆ†ç±»
        
        // è®¾ç½®äº‹ä»¶å›è°ƒ
        iconTree.setOnNodeClick((data) => {
            document.getElementById('iconStatus').textContent = `ç‚¹å‡»äº†: ${data.name} (${data.path || 'æ–‡ä»¶å¤¹'})`;
        });
        
        openTree.setOnNodeClick((data) => {
            document.getElementById('openStatus').textContent = `ç‚¹å‡»äº†: ${data.name} (${data.path || 'æ–‡ä»¶å¤¹'})`;
        });
        
        menuTree.setOnNodeClick((data) => {
            document.getElementById('menuStatus').textContent = `ç‚¹å‡»äº†: ${data.name} (${data.path || 'æ–‡ä»¶å¤¹'})`;
        });
        
        // å…¨å±€å‡½æ•°
        window.expandAllIcon = () => iconTree.expandAll();
        window.collapseAllIcon = () => iconTree.collapseAll();
        window.expandAllOpen = () => openTree.expandAll();
        window.collapseAllOpen = () => openTree.collapseAll();
        window.expandAllMenu = () => menuTree.expandAll();
        window.collapseAllMenu = () => menuTree.collapseAll();
        
        // åˆå§‹åŒ–çŠ¶æ€
        document.getElementById('iconStatus').textContent = 'å›¾æ ‡æµ‹è¯•æ ‘å·²åˆå§‹åŒ–';
        document.getElementById('openStatus').textContent = 'å±•å¼€çŠ¶æ€æµ‹è¯•æ ‘å·²åˆå§‹åŒ– (æ³¨æ„é»˜è®¤å±•å¼€çš„èŠ‚ç‚¹)';
        document.getElementById('menuStatus').textContent = 'MenuDataæµ‹è¯•æ ‘å·²åˆå§‹åŒ–';
    </script>
</body>
</html>