<head>
<script>
    // extension properties
    const attrs = [
        'width', 'height', 
        'radius', 'border',
        'box', 'margin', 'padding',
        'bgcolor', 'color', ];
    attrs.forEach((attr) =>{
        HTMLElement.prototype.__defineGetter__(attr, () => this.getAttribute(attr));
        HTMLElement.prototype.__defineSetter__(attr, function (value) { setCustomAttribute(this, attr, value); });
    });

    // create observer for dom changing.
    const observer = new MutationObserver((mutationsList, observer) => {
        for (const mutation of mutationsList) {
            const ele = mutation.target;
            if (mutation.type == 'childList'){
                // when new element created, set it's custom attributes.
                if (mutation.addedNodes.length > 0){
                    mutation.addedNodes.forEach((node)=>{
                        if (node instanceof HTMLElement)
                            setCustomAttributes(node);
                    });
                }
            }
            else if (mutation.type === 'attributes') {
                setCustomAttribute(ele, mutation.attributeName, ele.getAttribute(mutation.attributeName));
            }
        }
    });
    observer.observe(document, { attributes: true, childList: true, subtree: true });

    /**Set custom attributes values
     * @param(Element) ele
    */
    function setCustomAttributes(ele){
        var attrs = ele.getAttributeNames();
        attrs.forEach((attr) => {
            var val = ele.getAttribute(attr);
            if (val != null)
                setCustomAttribute(ele, attr, val);
        })
    }

    /**Set custom attribute value
    * @param(Element) ele
    */
    function setCustomAttribute(ele, name, value){
        if (ele.style.hasOwnProperty(name)){
            ele.style.setProperty(name, value);
            return;
        }
        switch(name){
            case "radius":          ele.style.borderRadius = value; break;
            case "bgcolor":         ele.style.backgroundColor = value; break;
        }
    }
</script>
<style>
    * {transition: all 0.4s; box-sizing: border-box;}
</style>
</head>
<body width="100%" height="100%" padding="20px" bgcolor="#f0f0f0">
    <h1>Custom attribute and property for tag: radius, width, height, bgcolor...</h1>
    <h2>Create by tag :</h2>
    <div radius='5px' width='100px' height='40px' bgcolor='red' color="white" padding="4px">DIV1</div>
    <rect display="block" radius='5px' width='100px' height='40px' bgcolor='red' color="white" padding="4px">DIV1</rect>
    <h2>Create by js:</h2>
</body>

<script>
    // dynamic create tag and set property value.
    const newDiv = document.createElement('div');
    newDiv.radius = '5px';
    newDiv.bgcolor = 'blue';
    newDiv.width  = '80px';
    newDiv.height = '40px';
    newDiv.padding = '4px';
    newDiv.innerHTML = "DIV2"
    document.body.appendChild(newDiv);

    // dynamic change property
    setInterval(()=> {
        newDiv.bgcolor = getRandomColor();
        newDiv.width = getRandomWidth();
    }, 1000);


    /**Get random width*/
    function getRandomWidth(){
        return Math.floor(Math.random() * 200) + 'px';
    }

    /**Get random color */
    function getRandomColor() {
      const r = Math.floor(Math.random() * 256);
      const g = Math.floor(Math.random() * 256);
      const b = Math.floor(Math.random() * 256);
      return `rgb(${r},${g},${b})`;
    }

</script>
